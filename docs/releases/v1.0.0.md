# Iron Cropper v1.0.0

## Release

- Version: `v1.0.0`
- Scope: Windows release binaries (`yunet-cli.exe`, `yunet-gui.exe`)

## Highlights

- Complete face-cropping workflow across both CLI and GUI, powered by YuNet.
- Deterministic crop controls with presets, face positioning, padding fill controls, and quality-aware automation.
- Optional GPU acceleration for preprocessing, enhancement, and custom YuNet inference with automatic CPU fallback.

## New Features

- End-to-end face crop pipeline with:
  - Preset or custom output dimensions.
  - Face-height targeting and positioning modes (Center, Rule of Thirds, Custom offsets).
  - Out-of-bounds fill color controls and shaped/vignette masking.
- Quality scoring + automation:
  - Laplacian variance quality classification (Low/Medium/High).
  - Auto-select best face, skip low-quality outputs, and quality suffix naming.
- Enhancement pipeline (CPU + GPU variants):
  - Auto-color, exposure, brightness, contrast, saturation, sharpening.
  - Skin smoothing, red-eye removal, and portrait background blur.
- Mapping-driven batch workflows:
  - CSV/TSV, Excel, Parquet, and SQLite imports for source/output mapping.
- Clipboard and drag/drop support in GUI:
  - Single image preview.
  - Folder/path ingestion for batch queue.
  - Data-table ingestion for mapping workflows.

## Improvements

- Added release automation:
  - Tag-driven Windows artifact workflow and checksum publishing.
- Added model integrity checks in CI/release:
  - SHA256 verification for YuNet original and 640x640 ONNX files.
- Export correctness:
  - GUI export now composites masked transparency against selected fill color, matching preview behavior.

## Bug Fixes

- Prevented panic paths in critical runtime code:
  - CSV batch log writes now propagate I/O errors rather than unwrapping.
  - GPU workspace mutex poisoning now returns descriptive errors instead of panicking.
- Improved export behavior around transparent/masked regions:
  - Added regression tests for opaque and semi-transparent fill compositing behavior.

## Packaging and Distribution

- Artifacts:
  - `iron-cropper-windows-x86_64.msi`
  - `iron-cropper-windows-x86_64-setup.exe`
  - `iron-cropper-windows-x86_64.zip`
  - `SHA256SUMS.txt`
- Included files:
  - `yunet-cli.exe`
  - `yunet-gui.exe`
  - `models/face_detection_yunet_2023mar_640.onnx`
- Checksum verification (PowerShell):
  - `Get-FileHash .\iron-cropper-windows-x86_64.zip -Algorithm SHA256`

## Known Issues

- Official binaries are currently Windows-focused for `v1.0.0`.
- macOS/Linux packaging and release binaries are deferred to a future release.

## Upgrade Notes

- Existing configuration remains compatible (`config/gui_settings.json`).
- The 640x640 YuNet model is required:
  - `models/face_detection_yunet_2023mar_640.onnx`
- Ensure `nasm` is installed and available in `PATH` if building from source.
